<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mimic AI</title>
<style>
    body {
        font-family: "Helvetica Neue", sans-serif;
        background-color: #1e1e1e;
        color: #f1f1f1;
        display: flex;
        flex-direction: column;
        align-items: center;
        margin: 0;
        padding: 0;
        min-height: 100vh;
    }
    h1 {
        margin: 20px 0;
        color: #ff5555;
        text-align: center;
    }
    #chat {
        width: 90%;
        max-width: 500px;
        flex: 1;
        overflow-y: auto;
        border: 1px solid #333;
        border-radius: 10px;
        padding: 10px;
        background-color: #2a2a2a;
        margin-bottom: 10px;
    }
    p {
        margin: 5px 0;
        line-height: 1.4;
    }
    b {
        color: #ff5555;
    }
    .control-buttons {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        margin-bottom: 20px;
    }
    button {
        background-color: #ff5555;
        color: #fff;
        border: none;
        padding: 15px 25px;
        border-radius: 50px;
        font-size: 18px;
        margin: 5px;
        cursor: pointer;
        transition: 0.2s;
    }
    button:hover {
        background-color: #ff7777;
    }
</style>
</head>
<body>
<h1>Mimic AI</h1>

<div id="chat"></div>

<div class="control-buttons">
    <button id="listenBtn">üé§ Talk</button>
    <button onclick="learnObject()">üìù Teach Object</button>
    <button onclick="talkAboutObject()">üëÄ Show Objects</button>
</div>

<script>
// -------------------------
// OpenAI Setup
// -------------------------
const OPENAI_API_KEY = "YOUR_OPENAI_KEY_HERE";

async function askGPT(prompt) {
    const response = await fetch("https://api.openai.com/v1/chat/completions", {
        method: "POST",
        headers: {
            "Content-Type": "application/json",
            "Authorization": `Bearer ${OPENAI_API_KEY}`
        },
        body: JSON.stringify({
            model: "gpt-4o-mini",
            messages: [{role: "user", content: prompt}],
            temperature: 0.8
        })
    });
    const data = await response.json();
    return data.choices[0].message.content;
}

// -------------------------
// Text-to-Speech
// -------------------------
function speak(text) {
    const utterance = new SpeechSynthesisUtterance(text);
    utterance.rate = 0.6;
    utterance.pitch = 0.8;
    speechSynthesis.speak(utterance);
}

// -------------------------
// Speech-to-Text
// -------------------------
const listenBtn = document.getElementById("listenBtn");
const chatDiv = document.getElementById("chat");

listenBtn.addEventListener("click", () => {
    if (!('webkitSpeechRecognition' in window || 'SpeechRecognition' in window)) {
        alert("Your browser does not support speech recognition!");
        return;
    }

    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    recognition.lang = "en-US";
    recognition.interimResults = false;
    recognition.start();

    recognition.onresult = async (event) => {
        const userText = event.results[0][0].transcript;
        chatDiv.innerHTML += `<p><b>You:</b> ${userText}</p>`;
        chatDiv.scrollTop = chatDiv.scrollHeight;

        const aiText = await askGPT(userText);
        chatDiv.innerHTML += `<p><b>Mimic:</b> ${aiText}</p>`;
        chatDiv.scrollTop = chatDiv.scrollHeight;
        speak(aiText);
    };

    recognition.onerror = (event) => {
        console.error(event.error);
        alert("Speech recognition error: " + event.error);
    };
});

// -------------------------
// Object Learning (manual input)
// -------------------------
let memory = {};
function learnObject() {
    const obj = prompt("Enter object name:");
    if (!obj) return;
    const phrase = prompt("Enter what AI should say about it:");
    if (!phrase) return;
    memory[obj] = phrase;
    alert(`Mimic learned: ${obj}`);
}

function talkAboutObject() {
    for (let obj in memory) {
        const phrase = memory[obj];
        chatDiv.innerHTML += `<p><b>Mimic sees ${obj}:</b> ${phrase}</p>`;
        chatDiv.scrollTop = chatDiv.scrollHeight;
        speak(phrase);
    }
}
</script>
</body>
</html>